EXAMPLE_NAME := batchnorm
SRC := batchnorm.c
LDFLAGS := -lm -ldl

# Size configurations - can be overridden via command line
# Total elements = BATCH_SIZE * CHANNELS * HEIGHT * WIDTH
# Hot loops: mean/var over CHANNELS, normalize/scale/bias over BATCH_SIZE
# LARGE (64-core): BATCH=4096 (64x64), CH=512 (8x64). ResNet conv3_x shape
# EXTRALARGE (1920-worker): BATCH=19200 (10x1920), CH=1920 (1x1920). 4.4x LARGE
SMALL_CFLAGS ?= -DBATCH_SIZE=4 -DCHANNELS=64 -DHEIGHT=32 -DWIDTH=32
MEDIUM_CFLAGS ?= -DBATCH_SIZE=8 -DCHANNELS=128 -DHEIGHT=64 -DWIDTH=64
LARGE_CFLAGS ?= -DBATCH_SIZE=4096 -DCHANNELS=512 -DHEIGHT=28 -DWIDTH=28
EXTRALARGE_CFLAGS ?= -DBATCH_SIZE=19200 -DCHANNELS=1920 -DHEIGHT=14 -DWIDTH=14

include ../carts.mk
